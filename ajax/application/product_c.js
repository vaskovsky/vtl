!function(t,n,e,i,r,a){"use strict";function o(n){t.getJSON("product_c.php"+i.search).then(n).fail(function(t){r("\u041e\u0448\u0438\u0431\u043a\u0430: "+t.responseText)})}function c(e){var a,c,u="product_i.html",f=t(e),d=i.search;return d?(a=u+d+"&*=1",c=u+d+"&/=/"):(a=u+"?*=1",c=u+"?/=/"),t("a[href='"+u+"?*=1']").attr("href",a),f.length?(f.each(function(){t(this).data("#",t(this).html())}),void t(n).on("pageshow",function(){f.empty(),o(function(n){var e=n.product;return e?void f.each(function(){for(var n=0;n<e.length;n++){var i=t(t(this).data("#").replace(/#product_id/g,t("<div>").text(e[n].product_id).html()).replace(/#product_name/g,t("<div>").text(e[n].product_name).html()).replace(/#image/g,t("<div>").text(e[n].image).html()).replace(/#description/g,t("<div>").text(e[n].description).html()).replace(/#price/g,t("<div>").text(e[n].price).html()));i.find("a[href='"+u+"?/=/']").attr("href",c+"&product_id="+e[n].product_id),t(this).append(i)}}):r("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445: \u041f\u0440\u043e\u0434\u0443\u043a\u0442"+d)})})):null}function u(n,e){t.post("product_c.php"+i.search,n).then(e).fail(function(t){r("\u041e\u0448\u0438\u0431\u043a\u0430: "+t.responseText)})}function f(e){function c(t){return h.find("[name='product_id["+(t+1)+"]']")}function f(t){return h.find("[name='product_name["+(t+1)+"]']")}function d(t){return h.find("[name='image["+(t+1)+"]']")}function l(t){return h.find("[name='description["+(t+1)+"]']")}function p(t){return h.find("[name='price["+(t+1)+"]']")}var h=t(e);if(!h.length)return null;var s=i.search,m=h.attr("action"),v=h.find(".btn-danger").last(),g=h.find(".btn-default").last();if("?*=1"==m||/[?&][*]=/.test(s))v.hide(),h.submit(function(t){t.preventDefault();var e=h.serialize(),i=h.data("*")||1;u(e+"&*="+i,function(){n.history.back()})});else{if("?/=/"!=m&&!/[?&][\/]=/.test(s))return r("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441: "+s);t(n).on("pageshow",function(){o(function(t){var n=t.product;return n?1!=n.length?r(n.length>1?"\u041d\u0435\u043e\u0434\u043d\u043e\u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441: \u041f\u0440\u043e\u0434\u0443\u043a\u0442"+s:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e: \u041f\u0440\u043e\u0434\u0443\u043a\u0442"+s):(c(0).val(n[0].product_id),f(0).val(n[0].product_name),d(0).val(n[0].image),l(0).val(n[0].description),p(0).val(n[0].price),void 0):r("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445: \u041f\u0440\u043e\u0434\u0443\u043a\u0442"+s)})}),v.click(function(t){t.preventDefault(),a("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435")&&u({"-":1},function(){n.history.back()})}),h.submit(function(t){t.preventDefault();var e=h.serialize();u(e+"&/=/",function(){n.history.back()})})}g.click(function(t){t.preventDefault(),n.history.back()})}function d(){var n=t("input[name='image_u']");if(n){var e={uploadUrl:"image_u.php",minFileCount:1,maxFileCount:1,maxFileSize:1024};n.each(function(){function n(t,n){o.val(n.jqXHR.responseJSON.image_url)}function i(){o.val("")}var r=t(this);if(r.data("image_u"))return null;r.data("image_u",1);var a=r.data("for"),o=t("input[name='"+a+"']");r.fileinput(e).on("fileuploaded",n).on("change",i).on("filecleared",i).on("fileremoved",i).on("filedeleted",i).on("filesuccessremove",i)})}}c(".product_dv"),f("form.product_df"),t(function(){d()})}(jQuery,window,document,location,alert,confirm);
