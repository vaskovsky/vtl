# Настройка VTL-приложений

## Содержание

* [Установка VTL-приложения](#установка-vtl-приложения)
* [Настройка соединения с SQLite](#настройка-соединения-с-sqlite)
* [Настройка соединения с PostgreSQL](#настройка-соединения-с-postgresql)
* [Настройка соединения с MySQL](#настройка-соединения-с-mysql)
* [Изменение пароля администратора](#изменение-пароля-администратора)
* [Масштабируемость](#масштабируемость)

## Установка VTL-приложения

Для установки VTL-приложения необходимо:
1. Прописать настройки в конфигурационном файле `config.php`.
2. Загрузить файлы программы на веб-сервер.

## Настройка соединения с SQLite

По умолчанию программа создаёт файл базы данных `univer.sqlite3`
в домашнем каталоге пользователя, от имени которого запускается PHP.

Если Вас это устраивает, то никакие настройки прописывать не нужно,
удалите файл `config.php`, если Вы ранее его создавали.

Если настройки по умолчанию не подходят,
создайте файл `config.php` в каталоге программы, содержащий текст:

```
<?php
$DB_DSN = 'sqlite:/path/to/univer.sqlite3';
```
где

`/path/to/univer.sqlite3`: абсолютный путь к файлу базы данных `*.sqlite3`.

Убедитесь, что пользователь, от имени которого запускается PHP,
имеет права на запись в данный файл.

## Настройка соединения с PostgreSQL

Создайте пустую базу данных на сервере PostgreSQL.

Создайте файл `config.php` в каталоге программы, содержащий текст:

```
<?php
$DB_DSN = 'pgsql:host=localhost;dbname=univer';
$DB_USER = 'postgres';
$DB_PASS = 'postgres_password';
```
где

`localhost`: имя сервера, на котором расположена база данных;

`univer`: имя базы данных;

`postgres`: имя пользователя PostgreSQL;

`postgres_password`: пароль пользователя PostgreSQL.

## Настройка соединения с MySQL

Создайте пустую базу данных на сервере MySQL.

Создайте файл `config.php` в каталоге программы, содержащий текст:

```
<?php
$DB_DSN = 'mysql:host=localhost;dbname=univer;charset=UTF8';
$DB_USER = 'mysql_user';
$DB_PASS = 'mysql_password';
```
где

`localhost`: имя сервера, на котором расположена база данных;

`univer`: имя базы данных;

`mysql_user`: имя пользователя MySQL;

`mysql_password`: пароль пользователя MySQL.

## Изменение пароля администратора

По умолчанию,
* Логин администратора: `admin`
* Пароль администратора: `admin`

Для изменения значений по умолчанию добавьте в файл `config.php` текст:

```
$ADMIN_LOGIN = "new_admin_login";
$ADMIN_PASSWORD = "new_admin_password";
```
где

`new_admin_login`: новый логин администратора по умолчанию.

`new_admin_password`: новый пароль администратора по умолчанию.

После того как база данных будет проинициализмрована,
логин и пароль администратора можно будет изменить только через веб-интерфейс.
Логин и пароль в файле `config.php` будут проигнорированы.

Обязательно измените пароль администратора после установки приложения.

Для этого выберите пункт меню [Настройки](sample/ru/profile.html).

## Масштабируемость

Веб-приложение состоит из двух частей: фронтенд и бэкенд,
которые могут располагаться на разных серверах.

На бэкенд-сервере размещаются файлы PHP,
которые поставляют данные для веб-приложения.

К одному бэкенд-серверу могут обращаться один или несколько фронтенд-серверов.

На фронтенд-сервере размещаются статичные файлы HTML и скрипт `api.js`.
Это позволяет
* изменять дизайн приложения без знания JavaScript, PHP и других технологий,
* кэшировать фронтенд на стороне клиента,
* использовать CDN для более быстрой загрузки фронтенда из любой точки мира.

По умолчанию, фронтенд ищет бэкенд на том же сервере, в той же директории,
но можно указать другое расположение с помощью элемента

```
<link id="server" href="http://vaskovsky.ru/vtl/sample/ru/" rel="preconnect"/>
```
________________________________________________________________________________
[↩ VTL](index.md)
