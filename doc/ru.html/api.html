<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" integrity="sha256-QeUWZci2yr7Vxe5Qq2lE2NZ4hlT9OlOhq3nJMefr8sk=" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/vtl@21.11.24/markdown.css"/>
<title>
VTL API
</title>
</head>
<body>
<h1 id="vtl-api">VTL API</h1>
<h2 id="javascript-api">JavaScript API</h2>
<p><code>VTL.createView(component_id: string)</code> создаёт представление для компонента <code>component_id</code>. Возвращает <code>VTL.Promise</code> после успешного обнаружения компонента и загрузки данных представления.</p>
<p><code>VTL.createForm(component_id: string)</code> создаёт форму для компонента <code>component_id</code>. Возвращает <code>VTL.Promise</code> после успешного обнаружения компонента и инициализации формы.</p>
<p><code>VTL.error(type: string, message: string, location: string)</code>: отображает сообщение об ошибке.</p>
<h3 id="обработчики">Обработчики</h3>
<p><code>VTL.initialPOST</code> отправляет начальный POST со строкой запроса из URL.</p>
<p><code>VTL.updateMathJax</code> обновляет представление формул при использовании MathJax.</p>
<p>Использование обработчиков:</p>
<pre><code>VTL.createForm(&quot;login&quot;).then(VTL.initialPOST);
</code></pre>
<h3 id="vtlcomponent">VTL.Component</h3>
<p><code>new VTL.Component(id: string)</code> создаёт новый <code>VTL.Component</code>.</p>
<p><code>component.id: string</code>: идентификатор компонента.</p>
<p><code>component.model: XMLDocument</code>: модель компонента.</p>
<p><code>component.view: HTMLElement</code>: вид компонента.</p>
<h3 id="vtlpromise">VTL.Promise</h3>
<p><code>component.promise(executor)</code> возвращает обещание, привязанное к данному компоненту.</p>
<p><code>executor: resolve =&gt; void</code> это функция, выполняемая конструктором в процессе создания нового обещания.</p>
<p><code>resolve(status: string)</code> вызывает следующее в цепочке обещание, привязанное к данному компоненту.</p>
<p><code>VTL.Promise</code> допускает множественный вызов <code>resolve</code> внутри функции <code>executor</code> и вложенных асинхронных функциях. При каждом вызове <code>resolve</code> будут вызываться все последующие обещания.</p>
<p><code>reject(reason)</code> не поддерживается в <code>VTL.Promise</code>. <code>VTL.error</code> используется вместо неё.</p>
<p><code>promise.then(onFulfilled)</code> добавляет обработчик выполнения к обещанию и возвращает новое обещание.</p>
<p><code>onFulfilled: component =&gt; VTL.Promise</code>: обработчик выполнения к обещанию обязан вернуть объект типа <code>VTL.Promise</code>.</p>
<p><code>catch(onRejected)</code> не поддерживается в <code>VTL.Promise</code>. <code>VTL.error</code> используется вместо неё.</p>
<h2 id="классы-css">Классы CSS</h2>
<p><code>.A4</code> = <code>.w-A4</code> + <code>.mx-auto</code>.</p>
<p><code>.A5</code> = <code>.w-A5</code> + <code>.mx-auto</code>.</p>
<p><code>.A6</code> = <code>.w-A6</code> + <code>.mx-auto</code>.</p>
<p><code>.subquery, #subquery</code>: при щелчке добавляет текущую строку запроса к атрибуту <code>href</code>.</p>
<p><code>.btn-back, #btn-back</code>: кнопка &quot;Назад&quot;.</p>
<p><code>.btn-print, #btn-print</code>: кнопка &quot;Печать&quot;.</p>
<p><code>.btn-reload, #btn-reload</code> кнопка &quot;Обновить&quot;.</p>
<p><code>.form-floating-group</code> вертикальная группа ввода для <code>.form-floating</code>.</p>
<p><code>.fw-300</code> = <code>font-weight: 300</code>.</p>
<p><code>.fw-500</code> = <code>font-weight: 500</code>.</p>
<p><code>.inner-my-0</code> удаляет верхнее поле первого дочернего элемента и нижнее поле последнего дочернего элемента.</p>
<p><code>.text-shadow</code> добавляет <code>text-shadow</code>.</p>
<p><code>.w-A4</code> устанавливает максимальную длину = A4 (40em, потому что 40em * 12pt (размер шрифта) = почти 170mm = 210mm (A4) -20mm слева -20mm справа).</p>
<p><code>.w-A5</code> устанавливает максимальную длину = A5 (30em, потому что 30em * 12pt (размер шрифта) = почти 128mm = 148mm (A5) -10mm слева -10mm справа).</p>
<p><code>.w-A6</code> устанавливает максимальную длину = A6 (20em, потому что 20em * 12pt (размер шрифта) = почти 85mm = 105mm (A6) -10mm слева -10mm справа).</p>
<p><code>.w-min</code> = <code>width: min-content</code>.</p>
<p><code>.w-max</code> = <code>width: max-content</code>.</p>
<h2 id="html">HTML</h2>
<p>Расположение бэкенд-сервера можно изменить с помощью HTML-тега:</p>
<pre><code>&lt;link id=&quot;server&quot; href=&quot;http://vaskovsky.ru/vtl/sample/ru/&quot; rel=&quot;preconnect&quot;/&gt;
</code></pre>
<p>где <code>http://vaskovsky.ru/vtl/sample/ru/</code> это адрес Вашего бэкенд-сервера.</p>
<h2 id="файлы">Файлы</h2>
<p><code>btn-back.js</code> реализует <code>.btn-back, #btn-back</code> без фреймворка.</p>
<p><code>btn-print.js</code> реализует <code>.btn-print, #btn-print</code> без фреймворка.</p>
<p><code>btn-reload.js</code> реализует <code>.btn-reload, #btn-print</code> без фреймворка.</p>
<p><code>datepicker3.js</code>: выбор даты для Bootstrap 3.</p>
<p><code>framework.js</code>: JavaScript-фреймворк.</p>
<p><code>vtl.js</code>: минимизированная версия файла <code>framework.js</code>.</p>
<p><code>vtl.ie6.js</code>: совместимая с IE6 реализация кнопок <code>btn-*</code> (использует <code>id</code> вместо классов).</p>
<p><code>vtl.css</code>: набор стилей CSS.</p>
<p><code>style.css</code> = <code>vtl.css</code> + сомнительные изменения стилей стандартных элементов.</p>
<p><code>markdown.css</code>: минимальный набор стилей для простых текстовых документов.</p>
<hr />
<p><a href="index.html">↩ VTL</a></p>
</body>
</html>
